<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDoS Monitoring Dashboard - DMT Protection</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/webp" href="../logo.webp">
</head>
<body>
    <!-- Navigation Bar -->
    <header>
        <nav class="navbar">
            <a class="logo" href="dashboard.html">
                <img src="../logo.webp" alt="DMT Protection logo" class="logo-img">
                <span>DMT Protection</span>
            </a>
            <ul class="nav-links">
                <li><a href="dashboard.html" class="active">Dashboard</a></li>
                <li><a href="#settings">Settings</a></li>
            </ul>
            <div class="auth-links">
                <button class="auth-btn login" onclick="logoutUser()">Logout</button>
                <button class="theme-toggle" id="theme-toggle">Light Mode</button>
            </div>
        </nav>
    </header>

    <!-- Main Dashboard Content -->
    <main class="dashboard-container">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <div class="header-content">
                <h1>DDoS Monitoring Dashboard</h1>
                <p class="dashboard-subtitle">Real-time network protection and threat analysis</p>
            </div>
            <div class="header-actions">
                <select id="time-range" class="time-selector">
                    <option value="1h">Last Hour</option>
                    <option value="24h" selected>Last 24 Hours</option>
                    <option value="7d">Last 7 Days</option>
                    <option value="30d">Last 30 Days</option>
                </select>
                <button class="btn btn-secondary" id="refresh-btn">Refresh</button>
            </div>
        </div>

        <!-- Profile & Settings Row -->
        <div class="dashboard-row">
            <div class="card">
                <h3>User Profile</h3>
                <p><strong>Name:</strong> <span id="profile-name">-</span></p>
                <p><strong>Email:</strong> <span id="profile-email">-</span></p>
                <p><strong>Status:</strong> <span id="profile-badge">-</span></p>
                <button class="btn mt-1" onclick="logoutUser()">Logout</button>
            </div>
            <div class="card" id="settings">
                <h3>Account Settings</h3>
                <ul style="list-style: none; padding: 0; color: var(--text-secondary); line-height: 1.8;">
                    <li>Two-factor auth: <span style="color: var(--accent-warning);">Pending</span></li>
                    <li>Login alerts: Enabled</li>
                    <li>Theme: <span id="settings-theme">Auto</span></li>
                    <li>Profile visibility: Private</li>
                </ul>
            </div>
        </div>

        <!-- Live Threat Status Indicator -->
        <div class="threat-status-card" id="threat-status">
            <div class="status-indicator">
                <div class="status-pulse" id="status-pulse"></div>
                <div class="status-icon" id="status-icon">OK</div>
            </div>
            <div class="status-content">
                <h2 id="status-title">System Normal</h2>
                <p id="status-description">No active threats detected. All systems operational.</p>
                <div class="status-metrics">
                    <span class="metric-item">
                        <strong id="threat-level">LOW</strong>
                        <small>Threat Level</small>
                    </span>
                    <span class="metric-item">
                        <strong id="uptime">99.99%</strong>
                        <small>Uptime</small>
                    </span>
                    <span class="metric-item">
                        <strong id="response-time">12ms</strong>
                        <small>Avg Response</small>
                    </span>
                </div>
            </div>
        </div>

        <!-- Traffic Metrics Cards -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-label">Bandwidth (BPS)</span>
                    <span class="metric-trend up" id="bps-trend">^</span>
                </div>
                <div class="metric-value" id="bps-value">0 B/s</div>
                <div class="metric-change" id="bps-change">+0% from last hour</div>
            </div>
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-label">Packets (PPS)</span>
                    <span class="metric-trend" id="pps-trend">-</span>
                </div>
                <div class="metric-value" id="pps-value">0 pps</div>
                <div class="metric-change" id="pps-change">+0% from last hour</div>
            </div>
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-label">Requests (RPS)</span>
                    <span class="metric-trend" id="rps-trend">-</span>
                </div>
                <div class="metric-value" id="rps-value">0 req/s</div>
                <div class="metric-change" id="rps-change">+0% from last hour</div>
            </div>
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-label">Blocked Traffic</span>
                    <span class="metric-trend up" id="blocked-trend">^</span>
                </div>
                <div class="metric-value" id="blocked-value">0</div>
                <div class="metric-change" id="blocked-change">0% blocked</div>
            </div>
        </div>

        <!-- Main Charts Row -->
        <div class="charts-row">
            <!-- Real-time Traffic Graph -->
            <div class="chart-card full-width">
                <div class="chart-header">
                    <h3>Real-time Traffic Overview</h3>
                    <div class="chart-controls">
                        <button class="chart-btn active" data-metric="bps">BPS</button>
                        <button class="chart-btn" data-metric="pps">PPS</button>
                        <button class="chart-btn" data-metric="rps">RPS</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="traffic-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- Secondary Charts Row -->
        <div class="charts-row">
            <!-- Protocol Breakdown -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3>Protocol Breakdown</h3>
                </div>
                <div class="chart-container">
                    <canvas id="protocol-chart"></canvas>
                </div>
            </div>

            <!-- Attack Types -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3>Attack Types Detected</h3>
                </div>
                <div class="chart-container">
                    <canvas id="attack-types-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- Attack Source Table and Mitigation Cards -->
        <div class="dashboard-row">
            <!-- Attack Sources Table -->
            <div class="table-card">
                <div class="table-header">
                    <h3>Top Attack Sources</h3>
                    <button class="btn btn-secondary" id="refresh-sources-btn" title="Refresh Sources">Refresh Sources</button>
                </div>
                <div class="table-container">
                    <table id="attack-sources-table">
                        <thead>
                            <tr>
                                <th>IP Address</th>
                                <th>Country</th>
                                <th>ASN</th>
                                <th>Threats</th>
                                <th>Last Seen</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="sources-tbody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Mitigation Status Cards -->
            <div class="mitigation-sidebar">
                <h3>Mitigation Status</h3>
                <div class="mitigation-cards">
                    <div class="mitigation-card" id="waf-status">
                        <div class="mitigation-icon">WAF</div>
                        <div class="mitigation-info">
                            <h4>Web Application Firewall</h4>
                            <span class="mitigation-status active">Active</span>
                        </div>
                        <button class="mitigation-toggle" data-mitigation="waf" onclick="toggleMitigation('waf')">ON</button>
                    </div>
                    <div class="mitigation-card" id="rate-limit-status">
                        <div class="mitigation-icon">RL</div>
                        <div class="mitigation-info">
                            <h4>Rate Limiting</h4>
                            <span class="mitigation-status active">Active</span>
                        </div>
                        <button class="mitigation-toggle" data-mitigation="rate-limit" onclick="toggleMitigation('rate-limit')">ON</button>
                    </div>
                    <div class="mitigation-card" id="captcha-status">
                        <div class="mitigation-icon">BOT</div>
                        <div class="mitigation-info">
                            <h4>CAPTCHA Challenge</h4>
                            <span class="mitigation-status active">Active</span>
                        </div>
                        <button class="mitigation-toggle" data-mitigation="captcha" onclick="toggleMitigation('captcha')">ON</button>
                    </div>
                    <div class="mitigation-card" id="geo-block-status">
                        <div class="mitigation-icon">GEO</div>
                        <div class="mitigation-info">
                            <h4>Geo-blocking</h4>
                            <span class="mitigation-status inactive">Inactive</span>
                        </div>
                        <button class="mitigation-toggle" data-mitigation="geo-block" onclick="toggleMitigation('geo-block')">OFF</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Blocked vs Allowed Traffic -->
        <div class="charts-row">
            <div class="chart-card">
                <div class="chart-header">
                    <h3>Blocked vs Allowed Traffic</h3>
                </div>
                <div class="chart-container">
                    <canvas id="blocked-allowed-chart"></canvas>
                </div>
            </div>

            <!-- Historical Attack Timeline -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3>Attack Timeline (Last 24h)</h3>
                </div>
                <div class="chart-container">
                    <canvas id="timeline-chart"></canvas>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 DMT Protection. All rights reserved. | Educational Purpose Only</p>
    </footer>

    <!-- Modal for IP Details -->
    <div id="ip-details-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>IP Address Details</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="ip-details-body">
                <!-- Dynamic content -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="blockIPAddress()">Block IP</button>
                <button class="btn btn-secondary" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

    <script src="js/scripts.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>

